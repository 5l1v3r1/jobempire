{{define "slaves"}}
<!doctype html>
<html>
  <head>
    {{template "htmlHeader"}}

    <title>Slaves (jobempire)</title>

    <script src="assets/scripts/pentagons.js"></script>
    <link rel="stylesheet" href="assets/styles/style.css" type="text/css">
  </head>
  <body>
    {{template "navHeader" "slaves"}}
    {{if $masters := masters .}}
      <div id="slave-list" class="pane-grid">
      {{range reverse $masters}}
        <div class="item-pane slave-pane {{template "slaveRunningClass" .}}">
          {{with .Master.SlaveInfo}}
            {{template "labelField" pair "CPUs" .NumCPU}}
            {{template "labelField" pair "Max Procs" .MaxProcs}}
            {{template "labelField" pair "GOOS" .OS}}
            {{template "labelField" pair "GOARCH" .Arch}}
          {{end}}

          {{template "labelField" pair "Total Jobs" .Master.JobCount}}

          {{if .Master.Accepting}}
            {{template "messageField" "Accepting"}}
          {{else if .Master.Running}}
            {{template "messageField" "Halting"}}
          {{else}}
            {{template "messageField" "Stopped"}}
          {{end}}
        </div>
      {{end}}
      </div>
    {{else}}
      <div id="no-slaves" class="item-pane empty-list-pane">No Slaves</div>
    {{end}}
  </body>
</html>
{{end}}

{{define "slaveRunningClass"}}
{{- if .Master.Running -}}
slave-pane-running
{{- else -}}
slave-pane-not-running
{{- end -}}
{{end}}
